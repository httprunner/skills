---
name: wechat-search-collector
description: 微信视频号搜索与结果遍历的多端自动化采集流程（Android/iOS/HarmonyOS/HDC），支持综合页搜索、个人页搜索与全量搜索结果遍历。
---

# 微信视频号搜索

## 概述
本技能覆盖同一产品在 Android / iOS / HarmonyOS 等多端界面一致场景的搜索与遍历流程。执行层需根据设备类型选择对应驱动：Android 使用 `android-adb-go`，HarmonyOS 使用 `harmony-hdc`，iOS 使用对应自动化工具链（如 XCUITest/Appium）。始终使用 `ai-vision` 从截图中定位 UI 元素，任何步骤都不要使用 `dump-ui` 做元素发现。为避免 Go 模块依赖问题，所有命令需在各自 skill 目录内执行：`android-adb-go` 的命令在其目录运行，`ai-vision` 的命令在其目录运行。截图统一写入 `~/.eval/screenshots/`，文件名带时间戳避免覆盖。本文示例以 Android/ADB 命令为主，其他端按工具链替换执行命令。

具体命令已抽离到 `references/commands.md`，流程中只描述关键步骤。

## 综合页搜索流程
适用于“在视频号综合页直接搜索关键词并遍历结果”的需求。

### 1. 预检
- 确认驱动与依赖可用，获取设备 serial，准备截图目录。
- 确认已提供搜索词 `QUERY`。

### 2. 启动微信
- 前台非微信则启动微信。

### 3. 进入 发现 -> 视频号
- 通过截图 + ai-vision 定位并点击 `发现` 与 `视频号` 入口。

### 4. 进入搜索界面
- 通过截图 + ai-vision 点击搜索框/放大镜进入搜索页；若被遮挡则先滑动后再定位。

### 5. 输入关键词并触发搜索
- 清空输入框，输入 `QUERY`，触发搜索。
- 若未进入结果页，重试触发直到进入结果页。

### 6. 结果滚动到底
- 循环滑动，周期性检测是否触底。

## 个人页搜索流程
适用于“先进入某账号个人页，再在个人页内检索多个关键词并遍历结果”的需求。

### 1. 预检
- 确认驱动与依赖可用，获取设备 serial，准备截图目录。
- 确认已提供账号名称 `ACCOUNT_NAME` 与关键词列表 `KEYWORDS`（逗号或换行分隔）。

### 2. 启动微信
- 前台非微信则启动微信。

### 3. 进入 发现 -> 视频号
- 通过截图 + ai-vision 定位并点击 `发现` 与 `视频号` 入口。

### 4. 进入搜索界面
- 通过截图 + ai-vision 点击搜索框/放大镜进入搜索页；若被遮挡则先滑动后再定位。

### 5. 搜索账号并进入个人页
- 输入账号名称 `ACCOUNT_NAME` 并触发搜索。
- 进入搜索结果后，点击 `账号` Tab。
- 在账号列表中点击目标账号进入个人页。

### 6. 在个人页依次搜索关键词
- 对关键词列表 `KEYWORDS` 逐个执行：清空 -> 输入关键词 -> 触发搜索 -> 滑动结果到底。
- 每个关键词的结果页都执行“结果滚动到底”的滑动循环。
- 每个关键词搜索前确认仍在该账号个人页；若误退出则重进个人页后继续。

## 备注与排障
- 点击不准：重新截图，让 ai-vision 提供更精确坐标（不要改用 `dump-ui`）。
- 异常流程（弹窗遮挡或步骤卡住）：先识别弹窗并关闭，再继续原步骤。处理命令见 `references/commands.md`。
