---
name: wechat-search-collector
description: 微信视频号搜索与结果遍历的自动化采集流程（Android），支持综合页搜索、个人页搜索与全量搜索结果遍历。
---

# 微信视频号搜索

## 概述
本技能覆盖微信视频号在 Android 端的关键词搜索与结果遍历流程。

- 执行层需使用 `android-adb` 实现 Android 设备管理和 UI 操作，使用 `ai-vision` 从截图中定位 UI 元素并推理下一步动作，不要使用 `dump-ui` 做元素发现。当前 `ai-vision` 实现会输出已转换的绝对像素坐标，可直接用于 adb 操作。
- 为避免依赖问题，所有命令需在各自 skill 目录内执行：`android-adb` 的命令在其目录运行，`ai-vision` 的命令在其目录运行。
- 截图统一写入 `~/.eval/screenshots/`，文件名带时间戳避免覆盖。
- 具体命令已抽离到 `references/commands.md`，流程中只描述关键步骤。

## 综合页搜索流程
适用于“在视频号综合页搜索单个或多个关键词并遍历结果”的需求。

### 1. 预检
- 确认驱动与依赖可用，获取设备 serial，准备截图目录。
- 确认已提供搜索词列表 `KEYWORDS`（逗号或换行分隔）。

### 2. 启动微信
- 若当前已在微信内，先使用 `android-adb` 的 `back-home` 命令返回手机桌面。
- 回到桌面后再启动微信。

### 3. 进入 发现 -> 视频号
- 通过截图 + ai-vision 定位并点击 `发现` 与 `视频号` 入口。

### 4. 进入搜索界面
- 通过截图 + ai-vision 点击搜索框/放大镜进入搜索页；若被遮挡则先滑动后再定位。

### 5. 依次输入关键词并触发搜索
- 对关键词列表 `KEYWORDS` 逐个执行：清空输入框 -> 输入关键词 -> 触发搜索。
- 若未进入结果页，重试触发直到进入结果页。

### 6. 结果滚动到底并切换下一个关键词
- 每个关键词的结果页都执行“结果滚动到底”的滑动循环。
- 不论结果多少，必须持续滑动直到确认触底（出现底部分割线、无更多提示或其他明确的触底标识），不得中途自行终止。
- 触底判定需更稳健：若连续两次滑动后截图中仍是同一批末尾结果（封面/标题/时长/点赞等保持一致），且底部出现明显空白区域或列表不再增长，即可判定已触底，即使没有“无更多”提示。
- 频率要求：在结果页滚动过程中，每滑动 5 次检测一次是否已滑动到底。
- 确认触底后：点击搜索框确保输入框激活 -> 清空 -> 输入下一个关键词 -> 触发搜索，直到完成所有关键词的遍历。

### 7. 任务完成后回到桌面
- 所有关键词遍历完成后，使用 `android-adb` 的 `back-home` 命令返回手机桌面。

## 个人页搜索流程
适用于“先进入某账号个人页，再在个人页内检索多个关键词并遍历结果”的需求。

### 1. 预检
- 确认驱动与依赖可用，获取设备 serial，准备截图目录。
- 确认已提供账号名称 `ACCOUNT_NAME` 与关键词列表 `KEYWORDS`（逗号或换行分隔）。

### 2. 启动微信
- 若当前已在微信内，先使用 `android-adb` 的 `back-home` 命令返回手机桌面。
- 回到桌面后再启动微信。

### 3. 进入 发现 -> 视频号
- 通过截图 + ai-vision 定位并点击 `发现` 与 `视频号` 入口。

### 4. 进入搜索界面
- 通过截图 + ai-vision 点击搜索框/放大镜进入搜索页；若被遮挡则先滑动后再定位。

### 5. 搜索账号并进入个人页
- 输入账号名称 `ACCOUNT_NAME` 并触发搜索
- 进入搜索结果后，若有目标账号则直接点击进入个人页
- 否则可先点击 `账号` Tab，然后在账号列表中点击目标账号进入个人页

### 6. 在个人页依次搜索关键词
- 对关键词列表 `KEYWORDS` 逐个执行：先点击个人页搜索框确保输入框激活 -> 清空 -> 输入关键词 -> 触发搜索 -> 滑动结果到底。
- 每个关键词的结果页都执行“结果滚动到底”的滑动循环。
- 不论结果多少，必须持续滑动直到确认触底（出现底部分割线、无更多提示或其他明确的触底标识），不得中途自行终止。
- 频率要求：在结果页滚动过程中，每滑动 5 次检测一次是否已滑动到底。
- 每个关键词搜索前确认仍在该账号个人页；若误退出则重进个人页后继续。

### 7. 任务完成后回到桌面
- 所有关键词遍历完成后，使用 `android-adb` 的 `back-home` 命令返回手机桌面。

## 备注与排障
- 点击不准：重新截图，让 ai-vision 提供更精确坐标（不要改用 `dump-ui`）。
- 异常流程（弹窗遮挡或步骤卡住）：先识别弹窗并关闭，再继续原步骤。处理命令见 `references/commands.md`。
